
<html>
<head>
<script>
	
	function newsampleForProject() {
		var ent = document.getElementById("samplename").value;
		var ent2 = document.getElementById("sampledescription").value;
		var sample = '{"name":"' + ent + '", "description" : "' + ent2 + '" }';
		console.log(sample);
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 202) {
				document.getElementById("outputserver").innerHTML = this.responseText;
			}
		};
		xhttp.open("POST", "http://localhost:8082/addSampleToProject", true);
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send(sample);
	}
	
	function newsample() {
		var ent = document.getElementById("samplename").value;
		var ent2 = document.getElementById("sampledescription").value;
		
		var sample = '{"name":"' + ent + '", "description" : "' + ent2 + '" }';
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 202) {
				document.getElementById("outputserver").innerHTML = this.responseText;
			}
		};
		xhttp.open("POST", "http://localhost:8082//jojoKLM", true);
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send(sample);
	}
	function listsample() {
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
			document.getElementById("samplelist").innerHTML = "";
			console.log(this.responseText);
				var samples = JSON.parse(this.responseText);
				listtotable(samples);
			}
		};
		xhttp.open("GET", "http://localhost:8082/samplelist");
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send();
	}
	function listtotable (samples) {
		for (i = 0; i < samples.length; i++) {
			document.getElementById("samplelist").innerHTML = document.getElementById("samplelist").innerHTML
					+ "<tr><td>"
					+ samples[i].name
					+ "</td><td>"
					+ samples[i].description
					+ "</td></tr>"
		}
	}
	function getOneProject() {
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				console.log(this.responseText);
			var project = JSON.parse(this.responseText);
			alert (project.name)
			}
		};
		xhttp.open("GET", "http://localhost:8082/findProject");
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send();
	}

	function list() {
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				//document.getElementById("outputserver").innerHTML;
				//alert("hier word de list leeg");
				document.getElementById("list").innerHTML = "";
				console.log(this.responseText);
				var projects = JSON.parse(this.responseText);
				uittekenen(projects);
			}
		};
		xhttp.open("GET", "http://localhost:8082/projectlist");
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send();
	}
	function uittekenen(projects) {
		for (i = 0; i < projects.length; i++) {
			document.getElementById("list").innerHTML = document.getElementById("list").innerHTML
					+ "<tr><td>"
					+ projects[i].id
					+ "</td><td>"
					+ projects[i].name
					+ "</td><td>"
					+ projects[i].comment
					+ "</td></tr>";
		}
	}
	function verstuur() {
		var ent = document.getElementById("projectname").value;
		var ent2 = document.getElementById("projectcomment").value;
		var project = '{"name":"' + ent + '", "comment" : "' + ent2 + '"}';
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 202) {
				document.getElementById("outputserver").innerHTML = this.responseText;
			}
		};
		xhttp.open("POST", "http://localhost:8082/projectpost", true);
		xhttp.setRequestHeader("Content-type", "application/json");
		xhttp.send(project);
	}
	function deleter() {
		var xhttp = new XMLHttpRequest();
		var id = document.getElementById("deletefield").value;
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				document.getElementById("deletebutton").innerHTML = this.responseText;
			}
		};
		xhttp.open("DELETE", "http://localhost:8082/project/" + id, true);
		alert("deleting " + id);
		xhttp.send();
	}
</script>

<style>
div.container {
	width: 100%;
	border: 1px solid gray;
}
header, footer {
	padding: 1em;
	color: white;
	background-color: black;
	clear: left;
	text-align: center;
}
nav {
	float: left;
	max-width: 160px;
	margin: 0;
	padding: 1em;
}
nav ul {
	list-style-type: none;
	padding: 0;
}
nav ul a {
	text-decoration: none;
}
article {
	margin-left: 170px;
	border-left: 1px solid gray;
	padding: 1em;
	overflow: hidden;
}
</style>

</head>
<body>

	<div class="container">

		<header>
			<h1>Lab Journal</h1>
		</header>

		<nav>
			<ul>
				<li><a href="#">Example</a></li>
				<li><a href="#">Demo</a></li>
				<li><a href="#">Test</a></li>
			</ul>
		</nav>

		<article>
			<h1>My First Buttons</h1>

			<table>
				<tr>
					<td>Name:</td>
					<td><input type="text" id="projectname" name="Name"
						value="projectname"></td>
				<tr>
					<td>Comment:</td>
					<td><input type="text" id="projectcomment" name="Comment"
						value="comments" size="100"></td>
			</table>
			<br>
			<button type="button" id="buttoninput" onclick="verstuur()">Create
				new Project</button>
			<button type="button" id="try" onclick="list()">show list</button>
			<input type="text" id="deletefield" name="DeleteById"
				value="enter ID">
			<button type="button" id="deletebutton" onclick="deleter()">delete</button>
			<table id="list" border=1></table>
			<table>
				<tr>
					<td>Name:</td>
					<td><input type="text" id="samplename" name="Name"
						value="samplename"></td>
				<tr>
					<td>Comment:</td>
					<td><input type="text" id="sampledescription" name="Description"
						value="description" size="100"></td>
				<tr>		<td>Project:</td>
					<td><input type="text" id="projectid" name="ProjectID"
						value="1" size="100"></td>
			</table>
			<br>
			<button type="button" id="buttoninput" onclick="newsample()">Create
				new sample</button>
				
			<button type="button" id="try" onclick="listsample()">show list</button>
			<button type="button" id="getProject" onclick="getOneProject()">get one project</button>
			<button type="button" id="getProject" onclick="newsampleForProject() ">make sample with 1st project</button>
			<table id="samplelist" border=1></table>

		</article>

		<footer>Program by Orsi & Steven</footer>

	</div>


</body>
</html>
